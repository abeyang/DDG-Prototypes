<!DOCTYPE html>
<html>
<head>
	<!-- https://github.com/bodymovin/bodymovin -->
	<script src="../js/bodymovin.js" type="text/javascript"></script>

	<style type="text/css">
		body, html{
		  margin:0;
		  width:100%;
		  height:100%;
		  background-color:#fff;
		  overflow: hidden;
		}
		#container{
		  width: 100%;
		  height:100%;
		  display: block;
		  overflow: hidden;
		  background-color: #56CCF2;
		  /*transform: translate3d(0,0,0);*/
		}
		#toggle {
			position: absolute;
			top: 30px;
			left: 50%;
			z-index: 50;
		}
	</style>

	<title>04 donttrack.us - Main</title>
</head>

<body>
	<button id="toggle">toggle</button>
	<div id="container"></div>
</body>

<script>
var animData = {
        container: document.getElementById('container'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        path: './index.json'
    };
var anim = bodymovin.loadAnimation(animData);;

// start animation onload
anim.addEventListener('DOMLoaded',startAnimation);

// global vars
var showmonster = false;

var frame_startmonster_begin = 67;
var frame_startmonster_loop = 111;
var frame_startmonster_end = 176;

var frame_endmonster_begin = frame_startmonster_end + 1;
var frame_endmonster_end = 215;

var frame_startnormal_begin = 0;
var frame_startnormal_end = frame_startmonster_begin - 1;

var toggle = document.getElementById('toggle');
toggle.onclick = toggleMonster;

function toggleMonster() {
	if (!showmonster) startMonster();
	else endMonster();
}

// start monster
function startMonster() {
	showmonster = true;
	anim.playSegments([frame_startmonster_begin, frame_startmonster_end],true);
	anim.addEventListener('loopComplete',monsterComplete);
}
function monsterComplete() {
	anim.playSegments([frame_startmonster_loop, frame_startmonster_end],true);
}

// end monster
function endMonster() {
	showmonster = false;
    anim.playSegments([frame_endmonster_begin, frame_endmonster_end],true);
	anim.addEventListener('loopComplete',startAnimation);
}

// onload animation
function startAnimation(){
	anim.playSegments([frame_startnormal_begin, frame_startnormal_end],true);
}
</script>

</html>
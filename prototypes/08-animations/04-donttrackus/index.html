<!DOCTYPE html>
<html>
<head>
	<!-- https://github.com/bodymovin/bodymovin -->
	<script src="../js/bodymovin.js" type="text/javascript"></script>
	<script src="../../../assets/js/jquery-1.11.2.min.js" type="text/javascript"></script>
	<script src="../../../assets/js/jquery.onepage-scroll.min.js" type="text/javascript"></script>

	<link rel="stylesheet" type="text/css" href="../../../assets/css/onepage-scroll.css">
	<link rel="stylesheet" type="text/css" href="../main.css">

	<title>DontTrack.Us</title>
</head>

<body>
	<div class="main">
		<section>
			<div id="container0" class="container">
				<h1><img src="assets/ddg-logo.svg" class="ddg logo"> vs <img src="assets/goog-logo.png" class="goog logo"></h1>
			</div>
		</section>

		<section>
			<div id="container1" class="container">
				<div class="header">
					<div class="company">DuckDuckGo</div>
					<div class="wrap">
						<input type="checkbox" id="toggle1" />
						<label class="slider-v2" for="toggle1"></label>
					</div> <!-- /.wrap -->
					<div class="company">Google</div>
				</div>				

				<div class="msg-container">
					<div class="message" id="msg1a">
						<strong>We don’t ever, ever track you.</strong>
						<p>So you can browse the web, safely and confidently.</p>
					</div>

					<div class="message" id="msg1b">
						<strong>Google tracks your search history.</strong>
						<p>And knows just about everything that you do online.</p>
					</div>
				</div> <!-- /.msg-container -->
			</div>
		</section>

		<section>
			<div id="container2" class="container">
				<div class="header">
					<div class="company">DuckDuckGo</div>
					<div class="wrap">
						<input type="checkbox" id="toggle2" />
						<label class="slider-v2" for="toggle2"></label>
					</div> <!-- /.wrap -->
					<div class="company">Google</div>
				</div>				

				<div class="msg-container">
					<div class="message" id="msg2a">
						<strong>We show ads based only on searches.</strong>
						<p>Imagine that!</p>
					</div>

					<div class="message" id="msg2b">
						<strong>Google follows you around with ads.</strong>
						<p>Remember searching for that <em>one thing</em> a long time ago? Yeah…</p>
					</div>
				</div> <!-- /.msg-container -->
			</div>
		</section>
	</div> <!-- /.main -->

</body>

<script>

// -----------
// ANIMATION 1
var anim1Data = {
        container: document.getElementById('container1'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        path: './main1b.json'
    };
var anim1 = bodymovin.loadAnimation(anim1Data);;

// start animation onload
anim1.addEventListener('DOMLoaded',startAnimation1);

// global vars
var showmonster1 = false;

var frame_startmonster_begin1 = 67;
var frame_startmonster_loop1 = 111;
var frame_startmonster_end1 = 176;

var frame_endmonster_begin1 = frame_startmonster_end1 + 1;
var frame_endmonster_end1 = 215;

var frame_startnormal_begin1 = 0;
var frame_startnormal_end1 = frame_startmonster_begin1 - 1;

var toggle1 = document.getElementById('toggle1');
toggle1.onclick = toggleMonster1;

function toggleMonster1() {
	if (!showmonster1) startMonster1();
	else endMonster1();
}

// start monster
function startMonster1() {
	showmonster1 = true;
	$('#msg1a').fadeOut(300, function() {
		$('#msg1b').delay(1000).fadeIn(300);
	});
	anim1.playSegments([frame_startmonster_begin1, frame_startmonster_end1],true);
	anim1.addEventListener('loopComplete',monsterComplete1);
}
function monsterComplete1() {
	anim1.playSegments([frame_startmonster_loop1, frame_startmonster_end1],true);
}

// end monster
function endMonster1() {
	showmonster1 = false;
	$('#msg1b').fadeOut(300, function() {
		$('#msg1a').delay(1000).fadeIn(300);
	});
    anim1.playSegments([frame_endmonster_begin1, frame_endmonster_end1],true);
	anim1.addEventListener('loopComplete',startAnimation1);
}

// onload animation
function startAnimation1(){
	anim1.playSegments([frame_startnormal_begin1, frame_startnormal_end1],true);
}

// -----------
// ANIMATION 2
var anim2Data = {
        container: document.getElementById('container2'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        path: './main2.json'
    };
var anim2 = bodymovin.loadAnimation(anim2Data);;
anim2.stop();

// global vars
var showmonster2 = false;

var frame_startnormal_begin2 = 0;
var frame_loop_begin2 = 128;
var frame_loop_end2 = 218;
var frame_startnormal_end2 = 248;

var frame_goog_begin2 = frame_startnormal_end2+1;
var frame_monster_start2 = 407;
var frame_monster_end2 = 497;
var frame_goog_end2 = 548;

var toggle2 = document.getElementById('toggle2');
toggle2.onclick = toggleMonster2;

function toggleMonster2() {
	if (!showmonster2) startMonster2();
	else endMonster2();
}

// start monster
function startMonster2() {
	showmonster2 = true;
	$('#msg2a').fadeOut(300, function() {
		$('#msg2b').delay(2000).fadeIn(300);
	});
	anim2.playSegments([frame_goog_begin2, frame_monster_end2],true);
	anim2.addEventListener('loopComplete',monsterComplete2);
}
function monsterComplete2() {
	anim2.playSegments([frame_monster_start2, frame_monster_end2],true);
}

// end monster
function endMonster2() {
	showmonster2 = false;
	$('#msg2b').fadeOut(300, function() {
		$('#msg2a').delay(2000).fadeIn(300);
	});
    anim2.playSegments([frame_monster_end2+1, frame_goog_end2],true);
	anim2.addEventListener('loopComplete',startAnimation2);
}

// onload animation
function startAnimation2(){
	anim2.playSegments([frame_startnormal_begin2, frame_loop_end2],true);
	anim2.addEventListener('loopComplete',loopNormal2);
}
function loopNormal2() {
	anim2.playSegments([frame_loop_begin2, frame_loop_end2],true);
}
function endAnimation2(){
	anim2.playSegments([frame_loop_end2+1, frame_startnormal_end2],true);
	anim2.addEventListener('loopComplete',anim2.stop);
}

// -------------
// PAGE SCROLLER
$(".main").onepage_scroll({
	loop: false,
	afterMove: function(index) {
		// console.log(index);
		if (index == 3) {
			// make sure checkbox is false + correct messages are displayed
			$('#toggle2').prop('checked',false);
			showmonster2 = false;
			$('#msg2a').show();
			$('#msg2b').hide();
			
			// need to load animation from beginning
			startAnimation2();
		}
	},
	beforeMove: function(index) {
		if (index == 3) {
			endAnimation2;
		}
	}
});
</script>

</html>
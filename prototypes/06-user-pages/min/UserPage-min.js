app.controller("UserPageController",function($scope,fn){$scope.fn=fn,$scope.users=[{username:"GuiltyDolphin",hasInfo:!0,avatar:"guiltydolphin.png"},{username:"AnthonyNeace",hasInfo:!0,avatar:"anthonyneace.jpg"},{username:"riqpe",hasInfo:!0,avatar:"riqpe.png"},{username:"pjhampton",hasInfo:!0,avatar:"pjhampton.jpg"},{username:"mintsoft",hasInfo:!0,avatar:"mintsoft.png"},{username:"jagtalon",hasInfo:!0,avatar:"jagtalon.jpeg"},{username:"moollaza",hasInfo:!0,avatar:"moollaza.jpeg"}],$scope.iaSort=function(e){switch(e.dev_milestone){case"live":return 0;case"complete":return 10;case"testing":return 20;case"development":return 30;case"planning":return 40;default:return 1e3}},$scope.showUser=function(){$scope.count={},$scope.topics=[],$scope.user=eval($scope.username),$scope.ias=_.filter(ias,function(e){return _.some(e.developer,function(e){return e.name==$scope.username})||e.maintainer&&e.maintainer.github==$scope.username}),$scope.ias_developed=_.filter(ias,function(e){return _.some(e.developer,function(e){return e.name==$scope.username})}),$scope.ias_maintained=_.filter(ias,function(e){return e.maintainer&&e.maintainer.github==$scope.username&&!("ghosted"==e.dev_milestone||"deprecated"==e.dev_milestone)}),$scope.ias_developed_only=_.filter(ias,function(e){return _.some(e.developer,function(e){return e.name==$scope.username})&&!(e.maintainer&&e.maintainer.github==$scope.username)&&!("ghosted"==e.dev_milestone||"deprecated"==e.dev_milestone)}),$scope.issues_open=_.filter($scope.user.issues,function(e){return"open"==e.state}),$scope.prs=_.filter($scope.user.issues,function(e){return null!=e.pull_request}),$scope.prs_open=_.filter($scope.prs,function(e){return"open"==e.state}),$scope.prs_open_reviewed=_.filter($scope.prs,function(e){return"open"==e.state&&e.assignee&&e.assignee.login==$scope.username}),$scope.prs_open_developed=_.filter($scope.prs,function(e){return"open"==e.state&&e.user&&e.user.login==$scope.username});var topics={};_.each($scope.ias,function(e){e.topic&&_.each(e.topic,function(e){topics[e]?++topics[e]:topics[e]=1})}),_.each(topics,function(e,s){var n={topic:"",amount:0};n.topic=s,n.amount=e,$scope.topics.push(n)}),$scope.count.all_ias=_.size($scope.ias),$scope.count.maintained_ias=_.size($scope.ias_maintained),$scope.count.developed_only_ias=_.size($scope.ias_developed_only),$scope.count.open_issues=_.size($scope.issues_open),$scope.count.closed_issues=_.size($scope.user.issues)-$scope.count.open_issues,$scope.count.open_prs=_.size($scope.prs_open),$scope.count.reviewed_prs=_.size($scope.prs_open_reviewed),$scope.count.developed_prs=_.size($scope.prs_open_developed),$scope.count.closed_prs=_.size($scope.prs)-$scope.count.open_prs;var maxtopic=_.max($scope.topics,function(e){return e.amount});$scope.count.max_topics=maxtopic.amount,$scope.show_ias=$scope.count.maintained_ias?$scope.ias_maintained:$scope.ias_developed_only},$scope.username=$scope.users[0].username,$scope.showUser(),$scope.show_issues=""}),app.factory("fn",function(){return{findByAttr:function(e,s,n){return _.find(e,function(e){return e[s]==n})},getAvatar:function(e,s,n){var o="";if(s){o='<div class="avatar '+n+'" title="'+s+'"';var t=this.findByAttr(e,"username",s);o+=t&&t.avatar?'><img src="avatars/'+t.avatar+'" /></div>':"><span>"+s.charAt(0)+"</span></div>"}return o},getDevs:function(e){var s="";return _.each(e.developer,function(e){s+="<span>"+e.name+" </span>"}),s},getDevsAvatars:function(e,s,n){var o="";return _.each(e.developer,function(e){n!=e.name&&(o+=this.getAvatar(s,e.name,""))},this),o},getTopics:function(e){var s="";return _.each(e.topic,function(e){s+="<span>"+e+" </span>"}),s},getLabels:function(e){var s="";return _.each(e.labels,function(e){s+="<span>"+e.name+"; </span>"}),s},getFromNow:function(e){return moment(e).fromNow()}}});